<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sakura Kanji - Quản trị</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="page-header">
      <div class="brand">
        <img src="https://img.icons8.com/?size=100&id=13766&format=png&color=000000" alt="Hoa anh đào" />
        <div>
          <h1>Khu vực quản trị Sakura Kanji</h1>
          <p>Theo dõi hội viên và xử lý yêu cầu nâng cấp VIP.</p>
        </div>
      </div>
      <div class="session-panel">
        <span id="admin-session-label" class="session-label">Chưa đăng nhập</span>
        <button id="open-session-dialog" type="button" class="ghost-button">Đăng nhập</button>
      </div>
    </header>

    <main class="layout">
      <section class="card">
        <header class="card__header">
          <div>
            <h2>Danh sách hội viên</h2>
            <p>Áp dụng bộ lọc để tìm đúng đối tượng bạn cần.</p>
          </div>
          <div class="filters">
            <label class="filter">
              <span>Bộ lọc</span>
              <select id="member-filter">
                <option value="">Tất cả</option>
                <option value="pending">Đang chờ duyệt</option>
                <option value="vip">Đang là VIP</option>
                <option value="free">Tài khoản miễn phí</option>
              </select>
            </label>
            <label class="filter">
              <span>Tìm kiếm</span>
              <input id="search-input" type="search" placeholder="Tên hoặc email" />
            </label>
          </div>
        </header>

        <div class="table-wrapper">
          <table id="members-table">
            <thead>
              <tr>
                <th>Người dùng</th>
                <th>Email</th>
                <th>Hạng tài khoản</th>
                <th>VIP hết hạn</th>
                <th>Trạng thái yêu cầu</th>
              </tr>
            </thead>
            <tbody id="members-tbody">
              <tr class="placeholder">
                <td colspan="5">Chưa có dữ liệu. Hãy chọn bộ lọc khác hoặc kiểm tra kết nối.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section class="card">
        <header class="card__header">
          <div>
            <h2>Chi tiết hội viên</h2>
            <p>Chọn một hội viên để xem thêm thông tin.</p>
          </div>
        </header>
        <div class="member-details" id="member-details">
          <div class="placeholder">Chưa chọn hội viên nào.</div>
        </div>
      </section>

      <section class="card">
        <header class="card__header">
          <div>
            <h2>Các gói VIP</h2>
            <p>Sử dụng để tư vấn khách hàng phù hợp.</p>
          </div>
        </header>
        <ul id="vip-plan-list" class="vip-plan-list">
          <li class="placeholder">Đang tải thông tin gói VIP...</li>
        </ul>
      </section>

      <section class="card card--stack">
        <header class="card__header">
          <div>
            <h2>Quản lý level</h2>
            <p>Thêm mới hoặc chỉnh sửa các level thuộc từng JLPT.</p>
          </div>
        </header>
        <div class="card__body card__body--split">
          <div class="card-panel">
            <div class="panel-heading">
              <h3>Danh sách level</h3>
              <label class="filter">
                <span>JLPT</span>
                <select id="jlpt-filter"></select>
              </label>
            </div>
            <div class="table-wrapper">
              <table id="levels-table">
                <thead>
                  <tr>
                    <th>Tên level</th>
                    <th>JLPT</th>
                    <th>Quyền truy cập</th>
                    <th>Trạng thái</th>
                    <th>Hành động</th>
                  </tr>
                </thead>
                <tbody id="levels-tbody">
                  <tr class="placeholder">
                    <td colspan="5">Chọn JLPT để xem danh sách level.</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="card-panel">
            <h3 id="level-form-title">Thêm level mới</h3>
            <form id="level-form" class="form-grid">
              <input type="hidden" id="level-id" />
              <label class="filter">
                <span>Tên level</span>
                <input id="level-name" type="text" required placeholder="Ví dụ: Bài tập từ vựng 1" />
              </label>
              <label class="filter">
                <span>JLPT</span>
                <select id="level-jlpt-select" required></select>
              </label>
              <label class="filter">
                <span>Mô tả</span>
                <textarea id="level-description" rows="3" placeholder="Thông tin ngắn gọn về level"></textarea>
              </label>
              <label class="filter">
                <span>Quyền truy cập</span>
                <select id="level-access-tier">
                  <option value="FREE">FREE</option>
                  <option value="VIP">VIP</option>
                  <option value="PREMIUM">PREMIUM</option>
                </select>
              </label>
              <label class="toggle">
                <input id="level-active" type="checkbox" checked />
                <span>Hiển thị level này cho học viên</span>
              </label>
              <div class="form-actions">
                <button type="button" id="level-cancel" class="ghost-button">Hủy</button>
                <button type="submit" class="primary">Lưu level</button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <section class="card card--stack">
        <header class="card__header">
          <div>
            <h2>Quản lý Kanji</h2>
            <p>Quản trị bộ Kanji theo từng level, hỗ trợ thêm, sửa và xóa.</p>
          </div>
        </header>
        <div class="card__body card__body--stacked">
          <div class="card-panel">
            <div class="panel-heading">
              <h3>Danh sách Kanji</h3>
              <label class="filter">
                <span>Level</span>
                <select id="kanji-level-select"></select>
              </label>
              <button type="button" id="reload-kanji" class="ghost-button ghost-button--small">Tải lại</button>
            </div>
            <div class="table-wrapper">
              <table id="kanji-table">
                <thead>
                  <tr>
                    <th>Kanji</th>
                    <th>Hán Việt</th>
                    <th>Âm On</th>
                    <th>Âm Kun</th>
                    <th>Hành động</th>
                  </tr>
                </thead>
                <tbody id="kanji-tbody">
                  <tr class="placeholder">
                    <td colspan="5">Chọn level để xem danh sách Kanji.</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="card-panel">
            <h3 id="kanji-form-title">Thêm Kanji mới</h3>
            <form id="kanji-form" class="form-grid">
              <input type="hidden" id="kanji-id" />
              <label class="filter">
                <span>Ký tự Kanji</span>
                <input id="kanji-character" type="text" maxlength="5" required placeholder="Ví dụ: 学" />
              </label>
              <label class="filter">
                <span>Hán Việt</span>
                <input id="kanji-hanviet" type="text" placeholder="Ví dụ: HỌC" />
              </label>
              <label class="filter">
                <span>Âm On</span>
                <input id="kanji-on" type="text" placeholder="Ví dụ: ガク (gaku)" />
              </label>
              <label class="filter">
                <span>Âm Kun</span>
                <input id="kanji-kun" type="text" placeholder="Ví dụ: まなぶ (manabu)" />
              </label>
              <label class="filter">
                <span>Mô tả</span>
                <textarea id="kanji-description" rows="3" placeholder="Gợi ý, ví dụ hoặc ghi chú."></textarea>
              </label>
              <label class="filter">
                <span>Thuộc level</span>
                <select id="kanji-level-input"></select>
              </label>
              <div class="form-actions">
                <button type="button" id="kanji-cancel" class="ghost-button">Hủy</button>
                <button type="submit" class="primary">Lưu Kanji</button>
              </div>
            </form>
          </div>
        </div>
      </section>
    </main>

    <dialog id="session-dialog">
      <form method="dialog" class="session-form">
        <h2>Đăng nhập quản trị</h2>
        <p>
          Hệ thống API demo yêu cầu bạn nhập <strong>ID người dùng quản trị</strong>.
          Ứng dụng sẽ tự tạo token dạng <code>Bearer demo-&lt;ID&gt;</code> khi gọi API.
        </p>
        <label class="filter">
          <span>ID quản trị viên</span>
          <input id="admin-id-input" type="number" min="1" required />
        </label>
        <menu>
          <button value="cancel" type="reset" class="ghost-button">Hủy</button>
          <button value="confirm" class="primary">Lưu</button>
        </menu>
      </form>
    </dialog>

    <template id="member-row-template">
      <tr>
        <td class="member-main">
          <img class="avatar" alt="Ảnh đại diện" />
          <div>
            <span class="member-name"></span>
            <span class="member-id"></span>
          </div>
        </td>
        <td class="member-email"></td>
        <td class="member-tier"></td>
        <td class="member-expiry"></td>
        <td class="member-request"></td>
      </tr>
    </template>

    <template id="vip-plan-template">
      <li>
        <h3></h3>
        <p class="plan-description"></p>
        <dl>
          <div>
            <dt>Mã gói</dt>
            <dd class="plan-code"></dd>
          </div>
          <div>
            <dt>Chi phí</dt>
            <dd class="plan-amount"></dd>
          </div>
          <div>
            <dt>Thời hạn</dt>
            <dd class="plan-duration"></dd>
          </div>
        </dl>
      </li>
    </template>

    <template id="level-row-template">
      <tr>
        <td class="level-name"></td>
        <td class="level-jlpt"></td>
        <td class="level-tier"></td>
        <td><span class="status-pill"></span></td>
        <td class="row-actions">
          <button type="button" class="table-action" data-action="edit">Sửa</button>
          <button type="button" class="table-action danger" data-action="delete">Xóa</button>
        </td>
      </tr>
    </template>

    <template id="kanji-row-template">
      <tr>
        <td class="kanji-character"></td>
        <td class="kanji-hanviet"></td>
        <td class="kanji-on"></td>
        <td class="kanji-kun"></td>
        <td class="row-actions">
          <button type="button" class="table-action" data-action="edit">Sửa</button>
          <button type="button" class="table-action danger" data-action="delete">Xóa</button>
        </td>
      </tr>
    </template>

    <script src="./admin.js" type="module"></script>
  </body>
</html>
